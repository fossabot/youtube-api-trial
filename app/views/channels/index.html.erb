<h1>
  <%= t('helpers.title.list', models: Channel.model_name.human.pluralize(I18n.locale)) %>
</h1>

<p>
  <%= render partial: 'actions' %>
</p>

<% if can? :create, Channel %>
  <%= link_to t('helpers.link.new'), new_channel_path %>
<% end %>
<br><br>

<table class='table table-bordered table-hover table-striped'>
  <thead>
  <tr>
    <th><%= t('text.channel.thumbnail') %></th>
    <th>
      <%= Channel.human_attribute_name :title %>
      <%= link_to '▲', channels_path(order: :title, asc: true) %>
      <%= link_to '▼', channels_path(order: :title, desc: true) %>
    </th>
    <th>
      <%= Channel.human_attribute_name :published_at %>
      <%= link_to '▲', channels_path(order: :published_at, asc: true) %>
      <%= link_to '▼', channels_path(order: :published_at, desc: true) %>
    </th>
    <th>
      <%= ChannelStatistic.human_attribute_name :subscriber_count %>
      <%= link_to '▲', channels_path(order: :subscriber_count, asc: true) %>
      <%= link_to '▼', channels_path(order: :subscriber_count, desc: true) %>
    </th>
    <th>
      <%= ChannelStatistic.human_attribute_name :view_count %>
      <%= link_to '▲', channels_path(order: :view_count, asc: true) %>
      <%= link_to '▼', channels_path(order: :view_count, desc: true) %>
    </th>
    <th>
      <%= ChannelStatistic.human_attribute_name :video_count %>
      <%= link_to '▲', channels_path(order: :video_count, asc: true) %>
      <%= link_to '▼', channels_path(order: :video_count, desc: true) %>
    </th>
    <th>
      <%= ChannelStatistic.human_attribute_name :created_at %>
      <%= link_to '▲', channels_path(order: :latest_acquired_at, asc: true) %>
      <%= link_to '▼', channels_path(order: :latest_acquired_at, desc: true) %>
    </th>
  </tr>
  </thead>

  <tbody>
  <% @channels.each do |c| %>
    <tr>
      <td><%= image_tag(c.thumbnail_url) if c.thumbnail_url.present? %></td>
      <td><%= print_link(c.title, channel_path(c), t('text.channel.title.missing')) %></td>
      <td><%= print_datetime(c.published_at) %></td>
      <td>
        <div class="vertical text-right text-nowrap">
          <span>
            <%= print_number(c.subscriber_count) %>
          </span>
          <span>
            <%= print_diff_numbers(c.subscriber_count, c.second_latest_subscriber_count) %>
          </span>
        </div>
      </td>
      <td>
        <div class="vertical text-right text-nowrap">
          <span>
            <%= print_number(c.view_count) %>
          </span>
          <span>
            <%= print_diff_numbers(c.view_count, c.second_latest_view_count) %>
          </span>
        </div>
      </td>
      <td>
        <div class="vertical text-right text-nowrap">
          <span>
            <%= print_number(c.video_count) %>
          </span>
          <span>
            <%= print_diff_numbers(c.video_count, c.second_latest_video_count) %>
          </span>
        </div>
      </td>
      <td>
        <div class="vertical text-right text-nowrap">
          <span>
            <%= print_acquired_at(c.latest_acquired_at) %>
          </span>
          <span>
            <%= print_comparison_period(c.latest_acquired_at, c.second_latest_acquired_at) %>
          </span>
        </div>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>

<br>

<% if can? :create, Channel %>
  <%= link_to t('helpers.link.new'), new_channel_path %>
<% end %>
